Promise

## Promise

1. 3个状态：`pending`、`fulfilled`、`rejected`
2. 一旦状态发生改变，就不会再变

## Promise.all

```ts
if (!Promise.all) {
    Promise.all = (arr: unknown[]) => {
        return new Promise((resolve, reject) => {
            const result: Promise<unknown>[] = []
            const getResult = (index: number, value) => {
                result[index] = value

                if (result.length === arr.length) {
                    resolve(result)
                }
            }
            for (let i = 0; i < arr.length; i++) {
                Promise.resolve(arr[i]).then((value) => {
                    getResult(i, value)
                }, reject)
            }
        })
    }
}
```

## Promise.race

```ts
if (!Promise.race1) {
    Promise.race1 = (arr: Promise<unknown>[]) => {
        return new Promise((resolve, reject) => {
            for (let i = 0; i < arr.length; i++) {
                Promise.resolve(arr[i]).then(resolve, reject)
            }
        })
    }
}
```