<!DOCTYPE html><html lang="en-US"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>SSE知识盘点 | Tony&#39;s Blob</title><meta name="generator" content="VuePress 1.9.7"><link rel="icon" href="/favicon.ico"><link rel="manifest" href="/manifest.json"><meta name="description" content="越努力越幸运"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><link rel="preload" href="/assets/css/0.styles.6a238085.css" as="style"><link rel="preload" href="/assets/js/app.c6e1a2e0.js" as="script"><link rel="preload" href="/assets/js/5.5d1de1a1.js" as="script"><link rel="preload" href="/assets/js/1.907b8fa1.js" as="script"><link rel="preload" href="/assets/js/6.586ea9b6.js" as="script"><link rel="preload" href="/assets/js/32.6c537ddd.js" as="script"><link rel="prefetch" href="/assets/js/10.602a4ae8.js"><link rel="prefetch" href="/assets/js/100.bda574bc.js"><link rel="prefetch" href="/assets/js/101.841dc6e8.js"><link rel="prefetch" href="/assets/js/102.61ab1325.js"><link rel="prefetch" href="/assets/js/103.4a738698.js"><link rel="prefetch" href="/assets/js/104.4624b952.js"><link rel="prefetch" href="/assets/js/105.0650da85.js"><link rel="prefetch" href="/assets/js/106.da8d3872.js"><link rel="prefetch" href="/assets/js/107.28ded3fd.js"><link rel="prefetch" href="/assets/js/108.6792a022.js"><link rel="prefetch" href="/assets/js/109.460fa5f3.js"><link rel="prefetch" href="/assets/js/11.e5a290e9.js"><link rel="prefetch" href="/assets/js/110.e9ada2ae.js"><link rel="prefetch" href="/assets/js/111.95ec873d.js"><link rel="prefetch" href="/assets/js/112.0a6107d6.js"><link rel="prefetch" href="/assets/js/113.501abf13.js"><link rel="prefetch" href="/assets/js/114.aa1c190b.js"><link rel="prefetch" href="/assets/js/115.e0cd02df.js"><link rel="prefetch" href="/assets/js/116.a23d63ba.js"><link rel="prefetch" href="/assets/js/117.ecc71f78.js"><link rel="prefetch" href="/assets/js/118.14c9c522.js"><link rel="prefetch" href="/assets/js/119.fb0f1cce.js"><link rel="prefetch" href="/assets/js/12.4dc02c49.js"><link rel="prefetch" href="/assets/js/120.8f0a0172.js"><link rel="prefetch" href="/assets/js/121.c3f31610.js"><link rel="prefetch" href="/assets/js/122.daa3956a.js"><link rel="prefetch" href="/assets/js/123.6091fc2b.js"><link rel="prefetch" href="/assets/js/13.67b48f94.js"><link rel="prefetch" href="/assets/js/14.e06127a4.js"><link rel="prefetch" href="/assets/js/15.5564a4ed.js"><link rel="prefetch" href="/assets/js/16.ad7d4bd4.js"><link rel="prefetch" href="/assets/js/17.6a5313e7.js"><link rel="prefetch" href="/assets/js/18.2e2415d4.js"><link rel="prefetch" href="/assets/js/19.ba66ba5f.js"><link rel="prefetch" href="/assets/js/2.01d0e47b.js"><link rel="prefetch" href="/assets/js/20.3f04c5a8.js"><link rel="prefetch" href="/assets/js/21.7ff947a4.js"><link rel="prefetch" href="/assets/js/22.843f2b15.js"><link rel="prefetch" href="/assets/js/23.88f8704c.js"><link rel="prefetch" href="/assets/js/24.f570b5b4.js"><link rel="prefetch" href="/assets/js/25.cf586693.js"><link rel="prefetch" href="/assets/js/26.a6ede79b.js"><link rel="prefetch" href="/assets/js/27.cf0d4b92.js"><link rel="prefetch" href="/assets/js/28.19224e27.js"><link rel="prefetch" href="/assets/js/29.36308872.js"><link rel="prefetch" href="/assets/js/30.70477bba.js"><link rel="prefetch" href="/assets/js/31.b95bd0fb.js"><link rel="prefetch" href="/assets/js/33.f063af58.js"><link rel="prefetch" href="/assets/js/34.94f856d2.js"><link rel="prefetch" href="/assets/js/35.977d9407.js"><link rel="prefetch" href="/assets/js/36.3e6ad7df.js"><link rel="prefetch" href="/assets/js/37.950aef43.js"><link rel="prefetch" href="/assets/js/38.2fbd153a.js"><link rel="prefetch" href="/assets/js/39.889f890b.js"><link rel="prefetch" href="/assets/js/40.db2ff377.js"><link rel="prefetch" href="/assets/js/41.d162b4cd.js"><link rel="prefetch" href="/assets/js/42.5c3270db.js"><link rel="prefetch" href="/assets/js/43.4bce8525.js"><link rel="prefetch" href="/assets/js/44.95e5d64c.js"><link rel="prefetch" href="/assets/js/45.3abbe406.js"><link rel="prefetch" href="/assets/js/46.3e8e8eff.js"><link rel="prefetch" href="/assets/js/47.99c88f78.js"><link rel="prefetch" href="/assets/js/48.cd20771a.js"><link rel="prefetch" href="/assets/js/49.599216e0.js"><link rel="prefetch" href="/assets/js/50.99abb52e.js"><link rel="prefetch" href="/assets/js/51.d3829e49.js"><link rel="prefetch" href="/assets/js/52.542b8502.js"><link rel="prefetch" href="/assets/js/53.89c7a8bd.js"><link rel="prefetch" href="/assets/js/54.2eaf7ce0.js"><link rel="prefetch" href="/assets/js/55.66e1372a.js"><link rel="prefetch" href="/assets/js/56.3996ff25.js"><link rel="prefetch" href="/assets/js/57.c591843d.js"><link rel="prefetch" href="/assets/js/58.0774ce53.js"><link rel="prefetch" href="/assets/js/59.dcb56431.js"><link rel="prefetch" href="/assets/js/60.16096eda.js"><link rel="prefetch" href="/assets/js/61.f6a5a866.js"><link rel="prefetch" href="/assets/js/62.da95f58d.js"><link rel="prefetch" href="/assets/js/63.8b628c51.js"><link rel="prefetch" href="/assets/js/64.c90a0b39.js"><link rel="prefetch" href="/assets/js/65.f1006798.js"><link rel="prefetch" href="/assets/js/66.a68afb92.js"><link rel="prefetch" href="/assets/js/67.aa05faa5.js"><link rel="prefetch" href="/assets/js/68.32496e27.js"><link rel="prefetch" href="/assets/js/69.33636279.js"><link rel="prefetch" href="/assets/js/7.91442103.js"><link rel="prefetch" href="/assets/js/70.7f05ecd8.js"><link rel="prefetch" href="/assets/js/71.8ca6048b.js"><link rel="prefetch" href="/assets/js/72.e75477e3.js"><link rel="prefetch" href="/assets/js/73.fd3142e5.js"><link rel="prefetch" href="/assets/js/74.6350f910.js"><link rel="prefetch" href="/assets/js/75.c865a4f7.js"><link rel="prefetch" href="/assets/js/76.c53f7af4.js"><link rel="prefetch" href="/assets/js/77.40282fb2.js"><link rel="prefetch" href="/assets/js/78.dc5ec6a2.js"><link rel="prefetch" href="/assets/js/79.5713d0b7.js"><link rel="prefetch" href="/assets/js/8.b8f12845.js"><link rel="prefetch" href="/assets/js/80.9dc467a2.js"><link rel="prefetch" href="/assets/js/81.aa3ba2fd.js"><link rel="prefetch" href="/assets/js/82.f8981bae.js"><link rel="prefetch" href="/assets/js/83.4407036f.js"><link rel="prefetch" href="/assets/js/84.8c0b9704.js"><link rel="prefetch" href="/assets/js/85.7ebd6d7f.js"><link rel="prefetch" href="/assets/js/86.73f897a2.js"><link rel="prefetch" href="/assets/js/87.7396369d.js"><link rel="prefetch" href="/assets/js/88.ed17c6fb.js"><link rel="prefetch" href="/assets/js/89.e0c69eeb.js"><link rel="prefetch" href="/assets/js/9.e4408fde.js"><link rel="prefetch" href="/assets/js/90.07efd889.js"><link rel="prefetch" href="/assets/js/91.ee721a90.js"><link rel="prefetch" href="/assets/js/92.259c209e.js"><link rel="prefetch" href="/assets/js/93.734b6342.js"><link rel="prefetch" href="/assets/js/94.0134dc5f.js"><link rel="prefetch" href="/assets/js/95.cbe9a44c.js"><link rel="prefetch" href="/assets/js/96.252d3c8a.js"><link rel="prefetch" href="/assets/js/97.59c91afe.js"><link rel="prefetch" href="/assets/js/98.26501dd0.js"><link rel="prefetch" href="/assets/js/99.52086448.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.05b52c13.js"><link rel="stylesheet" href="/assets/css/0.styles.6a238085.css"></head><body><div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-0f44a727><div data-v-0f44a727><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-0f44a727 data-v-0f44a727><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div></div><div class="password-shadow password-wrapper-out" style="display:none" data-v-355e03f9 data-v-0f44a727 data-v-0f44a727><h3 class="title" data-v-355e03f9 data-v-355e03f9>Tony's Blob</h3><p class="description" data-v-355e03f9 data-v-355e03f9>越努力越幸运</p><label id="box" class="inputBox" data-v-355e03f9 data-v-355e03f9><input type="password" data-v-355e03f9><span data-v-355e03f9>Konck! Knock!</span><button data-v-355e03f9>OK</button></label><div class="footer" data-v-355e03f9 data-v-355e03f9><span data-v-355e03f9><i class="iconfont reco-theme" data-v-355e03f9></i><a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-355e03f9>vuePress-theme-reco</a></span><span data-v-355e03f9><i class="iconfont reco-copyright" data-v-355e03f9></i><a data-v-355e03f9><span data-v-355e03f9>Tony</span>  <span data-v-355e03f9>2018 -</span>2023</a></span></div></div><div class="hide" data-v-0f44a727><header class="navbar" data-v-0f44a727><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><span class="site-name">Tony's Blob</span></a><div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a><div class="color-picker-menu" style="display:none"><div class="mode-options"><h4 class="title">Choose mode</h4><ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div><div class="search-box"><i class="iconfont reco-search"></i><input aria-label="Search" autocomplete="off" spellcheck="false"></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>分类</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="/categories/算法/" class="nav-link"><i class="undefined"></i>算法</a></li><li class="dropdown-item"><a href="/categories/CSS/" class="nav-link"><i class="undefined"></i>CSS</a></li><li class="dropdown-item"><a href="/categories/设计模式/" class="nav-link"><i class="undefined"></i>设计模式</a></li><li class="dropdown-item"><a href="/categories/前端/" class="nav-link"><i class="undefined"></i>前端</a></li><li class="dropdown-item"><a href="/categories/HTML/" class="nav-link"><i class="undefined"></i>HTML</a></li><li class="dropdown-item"><a href="/categories/JavaScript/" class="nav-link"><i class="undefined"></i>JavaScript</a></li><li class="dropdown-item"><a href="/categories/Node/" class="nav-link"><i class="undefined"></i>Node</a></li><li class="dropdown-item"><a href="/categories/其他/" class="nav-link"><i class="undefined"></i>其他</a></li><li class="dropdown-item"><a href="/categories/python/" class="nav-link"><i class="undefined"></i>python</a></li><li class="dropdown-item"><a href="/categories/阅读笔记/" class="nav-link"><i class="undefined"></i>阅读笔记</a></li><li class="dropdown-item"><a href="/categories/Vue/" class="nav-link"><i class="undefined"></i>Vue</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>标签</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>时间轴</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>关于</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="/views/about/" class="nav-link"><i class="iconfont reco-account"></i>关于我</a></li><li class="dropdown-item"><a href="https://juejin.cn/user/2365804753993613" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-juejin"></i>掘金<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><a href="https://github.com/zjgyb" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="sr-only">(opens new window)</span></span></a></li></ul></div></div></nav></div></header><div class="sidebar-mask" data-v-0f44a727></div><aside class="sidebar" data-v-0f44a727><div class="personal-info-wrapper" data-v-5aaeb100 data-v-0f44a727><img src="/avatar.jpg" alt="author-avatar" class="personal-img" data-v-5aaeb100><h3 class="name" data-v-5aaeb100>Tony</h3><div class="num" data-v-5aaeb100><div data-v-5aaeb100><h3 data-v-5aaeb100>94</h3><h6 data-v-5aaeb100>Articles</h6></div><div data-v-5aaeb100><h3 data-v-5aaeb100>175</h3><h6 data-v-5aaeb100>Tags</h6></div></div><ul class="social-links" data-v-5aaeb100></ul><hr data-v-5aaeb100></div><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>分类</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="/categories/算法/" class="nav-link"><i class="undefined"></i>算法</a></li><li class="dropdown-item"><a href="/categories/CSS/" class="nav-link"><i class="undefined"></i>CSS</a></li><li class="dropdown-item"><a href="/categories/设计模式/" class="nav-link"><i class="undefined"></i>设计模式</a></li><li class="dropdown-item"><a href="/categories/前端/" class="nav-link"><i class="undefined"></i>前端</a></li><li class="dropdown-item"><a href="/categories/HTML/" class="nav-link"><i class="undefined"></i>HTML</a></li><li class="dropdown-item"><a href="/categories/JavaScript/" class="nav-link"><i class="undefined"></i>JavaScript</a></li><li class="dropdown-item"><a href="/categories/Node/" class="nav-link"><i class="undefined"></i>Node</a></li><li class="dropdown-item"><a href="/categories/其他/" class="nav-link"><i class="undefined"></i>其他</a></li><li class="dropdown-item"><a href="/categories/python/" class="nav-link"><i class="undefined"></i>python</a></li><li class="dropdown-item"><a href="/categories/阅读笔记/" class="nav-link"><i class="undefined"></i>阅读笔记</a></li><li class="dropdown-item"><a href="/categories/Vue/" class="nav-link"><i class="undefined"></i>Vue</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>标签</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>时间轴</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>关于</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="/views/about/" class="nav-link"><i class="iconfont reco-account"></i>关于我</a></li><li class="dropdown-item"><a href="https://juejin.cn/user/2365804753993613" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-juejin"></i>掘金<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><a href="https://github.com/zjgyb" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="sr-only">(opens new window)</span></span></a></li></ul></div></div></nav></aside><div class="password-shadow password-wrapper-in" style="display:none" data-v-355e03f9 data-v-0f44a727><h3 class="title" data-v-355e03f9 data-v-355e03f9>SSE知识盘点</h3><label id="box" class="inputBox" data-v-355e03f9 data-v-355e03f9><input type="password" data-v-355e03f9><span data-v-355e03f9>Konck! Knock!</span><button data-v-355e03f9>OK</button></label><div class="footer" data-v-355e03f9 data-v-355e03f9><span data-v-355e03f9><i class="iconfont reco-theme" data-v-355e03f9></i><a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-355e03f9>vuePress-theme-reco</a></span><span data-v-355e03f9><i class="iconfont reco-copyright" data-v-355e03f9></i><a data-v-355e03f9><span data-v-355e03f9>Tony</span>  <span data-v-355e03f9>2018 -</span>2023</a></span></div></div><div data-v-0f44a727><main class="page"><section><div class="page-title"><h1 class="title">SSE知识盘点</h1><div data-v-5eef61be><i class="iconfont reco-account" data-v-5eef61be><span data-v-5eef61be>Tony</span></i><i class="iconfont reco-date" data-v-5eef61be><span data-v-5eef61be>5/16/2023</span></i><i class="iconfont reco-eye" data-v-5eef61be><span id="/views/js/2023/2023-05-16.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-5eef61be><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:400;color:#999"></a></span></i></div></div><div class="theme-reco-content content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a>前言</h2><p>不知道有人是否与我一致，想到<code>SSE</code>脑海中的印象就是服务器能够向客户端推送消息，但客户端不能通过该方法返回消息，而有了<code>WebSocket</code>之后似乎就没有必要用到<code>SSE</code>了，那真的是这样吗？那就来一次知识盘点吧，看看它与<code>WebSocket</code>的差异！</p><h2 id="介绍"><a href="#介绍" class="header-anchor">#</a>介绍</h2><p><code>SSE</code>是<code>Server-Sent Events</code>的简称，是一种允许服务器实时地将事件推送到客户端的技术，同时能够让客户端与服务器保持一个持久的<code>HTTP</code>连接。它是单项通信，只能从服务端发送到客户端。</p><p>有如下几个特点：</p><blockquote><p>通过一个长连接低延迟交付</p><p>高效的浏览器消息解析，不会出现无限缓冲；</p><p>自动跟踪最后看到的消息及自动重新连接；</p><p>消息通知在客户端以 DOM 事件形式呈现。</p></blockquote><h2 id="建立-sse"><a href="#建立-sse" class="header-anchor">#</a>建立 SSE</h2><p>在客户端创建一个<code>SSE</code>应用程序也很简单，只需要简单的一行，例如：</p><div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">const</span> sse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token string">'/api/sse'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>语法也就两个参数</p><div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="url"><a href="#url" class="header-anchor">#</a>url</h3><p>远端服务器资源路径，该<code>url</code>参数值应该符合正常的<code>http</code>接口格式，那一个正常的连接是怎么样的内，如图所示：</p><p><img src="/assets/img/success.png" alt="success"></p><p>有几个疑问点<strong>值得注意</strong></p><p><strong>说明</strong>：下面如果没有特殊标明，一律使用<code>Chrome</code>进行测试</p><h4 id="疑问一"><a href="#疑问一" class="header-anchor">#</a>疑问一</h4><p>如果不使用当前的域名（<strong>服务器相关接口开放</strong>），会发生什么现象？</p><p>直接上图，如下图所示：</p><p><img src="/assets/img/cors.png" alt="跨域"></p><p>从图中可以发现，与使用<code>AJAX</code>请求在浏览器中表现一致，浏览器会提示存在跨域，连接失败</p><h4 id="疑问二"><a href="#疑问二" class="header-anchor">#</a>疑问二</h4><p>如果这个连接地址是错误的或者没有这个资源路径会有什么现象？</p><p>直接上图，如下图所示：</p><p>同域情况：<br><img src="/assets/img/err1.png" alt="error"></p><p>如果是找不到资源路径的情况下不会发生重连</p><p>跨域情况：<br><img src="/assets/img/err2.png" alt="error"></p><p>而在跨域情况下<code>Chrome</code>、<code>Edge</code>会发生自动重连现象，而<code>Firfox</code>则不会，这里我在自己的电脑上测试一下时间间隔是多大：</p><p>使用的测试代码为：</p><div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">const</span> sse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token string">'http://xxx:8080/api'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
sse<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        timer <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> newTimer <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newTimer <span class="token operator">-</span> timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        timer <span class="token operator">=</span> newTimer<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol><li><code>Chrome 版本 112.0.5615.138（正式版本）（64 位）</code>：<code>5s</code>左右</li></ol><p><img src="/assets/img/reconnect.png" alt="chrome reconnect"></p><ol start="2"><li><code>Microsoft Edge版本 113.0.1774.35 (正式版本) (64 位)</code>：<code>5s</code>左右</li></ol><p><img src="/assets/img/edge_rec.png" alt="edge reconnect"></p><ol start="3"><li><code>FireFox 版本 113.0.1</code>：<code>firefox</code>比较特殊，如果是同域，那么与<code>chrome</code>一致，如果是跨域，那么如下图所示，直接报错，不发生重连</li></ol><p><img src="/assets/img/firefox_connect.png" alt="firefox reconnect"></p><p>为什么会表现不一致呢？在规范中有这么一句话：</p><blockquote><p>When a user agent is to fail the connection, the user agent must queue a task which, if the readyState attribute is set to a value other than CLOSED, sets the readyState attribute to CLOSED and fires an event named error at the EventSource object. Once the user agent has failed the connection, it does not attempt to reconnect.</p></blockquote><p>大致意思就是：当用户代理需要关闭连接时，用户代理必须排队执行一个任务，该任务在<code>readyState</code>属性设置为非<code>CLOSED</code>值时，将<code>readyState</code>属性设置为<code>CLOSED</code>，并在<code>EventSource</code>对象上触发一个名为<code>error</code>的事件。一旦用户代理关闭了连接，它就不会尝试重新连接。</p><p>其实在<code>error</code>事件中打印<code>readyState</code>能够发现端倪，<code>Chrome</code>的表现还是为<code>0</code>，而<code>FireFox</code>则为<code>2</code>，因此两者是否重连取决于对于连接失败的请求的状态是否设置为<code>CLOSED</code>有关</p><h4 id="疑问三"><a href="#疑问三" class="header-anchor">#</a>疑问三</h4><p><code>SSE</code>能够自动重连，那么这个时间是多少？是疑问二的<code>5s</code>吗？</p><p>规范是否有对这个重连时间进行定义呢？这里可以查看<a href="https://html.spec.whatwg.org/multipage/server-sent-events.html#sse-processing-model" target="_blank" rel="noopener noreferrer">HTML规范<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="sr-only">(opens new window)</span></span></a></p><blockquote><p>A reconnection time, in milliseconds. This must initially be an implementation-defined value, probably in the region of a few seconds.</p></blockquote><p>重连时间：以毫秒为单位。这最初必须是一个实现定义的值，可能在几秒钟内。</p><p>这句话意思是应当先设置一个由具体实现（例如浏览器或其他客户端）所定义的时间值，作为<code>SSE</code>重新连接的间隔。虽然此值会因不同实现而有所差别，但通常会在几秒钟的范围内，因此规范本身并没有确定默认的重连时间间隔是多少，而是将这个初始值留给具体实现（例如浏览器）来设定。</p><p>使用如下代码进行测试：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// server.js</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">SSE</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'sse'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/index.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Server listening on port 3000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> sse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSE</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span><span class="token punctuation">;</span>

sse<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connection'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">client</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Client connected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">sendEvent</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   client<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Client disconnected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">sendEvent</span><span class="token punctuation">(</span><span class="token parameter">client<span class="token punctuation">,</span> count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   client<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token string">'Sample data: '</span> <span class="token operator">+</span> count <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 主要代码 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
   <span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token string">'/sse'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

   source<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      div<span class="token punctuation">.</span>textContent <span class="token operator">=</span> event<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   source<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          timer <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> newTimer <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newTimer <span class="token operator">-</span> timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
          timer <span class="token operator">=</span> newTimer<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ol><li><code>Chrome</code>:<code>3s</code>左右<br><img src="/assets/img/chrome_rec_success.png" alt="image"></li><li><code>FireFox</code>:<code>5s</code>左右<br><img src="/assets/img/firefox_rec_success.png" alt="image"></li></ol><p>因此：<code>Chrome</code>重连时间存在两种情况</p><h3 id="options"><a href="#options" class="header-anchor">#</a>options</h3><p>连接的配置项，目前只有一个配置项<code>withCredentials</code></p><h4 id="withcredentials"><a href="#withcredentials" class="header-anchor">#</a>withCredentials</h4><p>布尔值，默认为<code>false</code>，表示在跨域时是否携带凭证（credentials）</p><p>因此这个值需要在跨域的时候才需要设置</p><p>未设置时：<br><img src="/assets/img/cookie_unset.png" alt="no cookie"></p><p>设置这个属性后<br><img src="/assets/img/cookie.png" alt="cookie"></p><h2 id="实例属性"><a href="#实例属性" class="header-anchor">#</a>实例属性</h2><h3 id="readystate"><a href="#readystate" class="header-anchor">#</a>readyState</h3><p>当前<code>SSE</code>的连接状态</p><ul><li>0(EventSource.CONNECTING): 连接中</li><li>1(EventSource.OPEN): 已连接</li><li>2(EventSource.CLOSED): 已关闭</li></ul><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token string">'/sse'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

source<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>source<span class="token punctuation">.</span>readyState<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="url-2"><a href="#url-2" class="header-anchor">#</a>url</h3><p>创建<code>SSE</code>实例对象的<code>URL</code>，<strong>注意</strong>这个返回的<code>url</code>如果是同域时会自动补充前面的域名，如果是默认端口号也会隐藏掉，例如：</p><ol><li>自动补全</li></ol><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token string">'sse'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

source<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>source<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// http://localhost:3000/sse</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="2"><li>默认端口不显示</li></ol><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token string">'http://localhost:80/sse'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">withCredentials</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

source<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>source<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// http://localhost/sse</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="withcredentials-2"><a href="#withcredentials-2" class="header-anchor">#</a>withCredentials</h3><p>是否携带凭证，这个在<code>new</code>一个对象时第二个参数配置相关，默认为<code>false</code></p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token string">'http://localhost:80/sse'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">withCredentials</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

source<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>source<span class="token punctuation">.</span>withCredentials<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="实例方法"><a href="#实例方法" class="header-anchor">#</a>实例方法</h2><h3 id="close"><a href="#close" class="header-anchor">#</a>close</h3><p>关闭<code>SSE</code>，与<code>WebSocket</code>不同的是，这个实例方法不需要传递任何参数</p><div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token string">'sse'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

source<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   source<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="事件"><a href="#事件" class="header-anchor">#</a>事件</h2><p>和其他事件一致，有两种声明方式</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function-variable function">onopen</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="open"><a href="#open" class="header-anchor">#</a>open</h3><p>当<code>SSE</code>处于<code>open</code>状态，即<code>readyState</code>为<code>1</code>时触发</p><p>该打开事件参数为普通的<a href="https://developer.mozilla.org/en-US/docs/Web/API/Event" target="_blank" rel="noopener noreferrer">Event<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="sr-only">(opens new window)</span></span></a></p><h3 id="message"><a href="#message" class="header-anchor">#</a>message</h3><p>当<code>SSE</code>接收到消息时触发并且消息类型为<code>message</code></p><p>这个消息事件参数与<code>WebSocket</code>中<code>message</code>一致，可以看另一个篇文章<a href="https://juejin.cn/post/7228831981889634363#heading-25" target="_blank" rel="noopener noreferrer">WebSocket知识盘点<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="sr-only">(opens new window)</span></span></a>中的介绍</p><p>依次打印出的结果：<br><img src="/assets/img/msg_event.png" alt="image"></p><p>这里需要着重介绍一下<code>lastEventId</code></p><p>这个字段是用来标识返回的消息，如果在某一刻浏览器与服务器之间的服务断开了，那么在重新连接后浏览器会把断开前最后一个消息标识传递给服务器，例如</p><p><img src="/assets/img/lastEventId.png" alt="image"></p><p>如果一开始设置了标识<code>2</code>，但是后面的消息没有设置标识了，那么如果这个时候断开重连，那这个<code>lastEventId</code>是什么呢？</p><p>经过测试发现，后面没有设置的标识默认会是最后设置的那一个标识，也就是<code>2</code>，因此重连时<code>lastEventId</code>也为<code>2</code></p><h3 id="error"><a href="#error" class="header-anchor">#</a>error</h3><p>当<code>SSE</code>发生了一些异常导致不能正常连接时触发</p><p>该关闭事件参数为普通的<a href="https://developer.mozilla.org/en-US/docs/Web/API/Event" target="_blank" rel="noopener noreferrer">Event<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="sr-only">(opens new window)</span></span></a></p><h3 id="自定义事件"><a href="#自定义事件" class="header-anchor">#</a>自定义事件</h3><p><code>SSE</code>支持自定义事件，只要服务器设置了相应的事件类型，那么<code>SSE</code>支持设置自定义事件</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// server.js</span>
client<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">'update'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 原生</span>
res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'event: update\n'</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// browser</span>
<span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token string">'sse'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
source<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'update'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="其他"><a href="#其他" class="header-anchor">#</a>其他</h2><p>后端返回给前端的消息一共存在四个键值对，<code>event</code>、<code>data</code>、<code>id</code>、<code>retry</code>，例如<code>Node</code>中：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code>res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'event: update\n'</span><span class="token punctuation">)</span>
res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'data: test\n'</span><span class="token punctuation">)</span>
res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'id: 1\n'</span><span class="token punctuation">)</span>
res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'retry: 8000\n'</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>前三个其实已经介绍过了，这里着重介绍<code>retry</code></p><h3 id="retry"><a href="#retry" class="header-anchor">#</a>retry</h3><p>这个字段用于设置重连时间，正如之前疑问三中所说，规范自定义了模糊的几秒，具体实现不同浏览器可能存在差异，因此如果加了这个字段后，那么重连时间能够做到一致</p><div class="language-js line-numbers-mode"><pre class="language-js"><code>res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'retry: 8000\n'</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="差异总结"><a href="#差异总结" class="header-anchor">#</a>差异总结</h2><p>以下是<code>SSE</code>与<code>WebSocket</code>的差异总结</p><h3 id="不同点"><a href="#不同点" class="header-anchor">#</a>不同点</h3><ol><li><code>SSE</code>利用的是<code>HTTP</code>连接，因此使用的协议也就是<code>HTTP</code>，而<code>WebSocket</code>主要（仍然要经历<code>HTTP</code>阶段，需要经历一次握手）使用的是自己的协议</li><li><code>SSE</code>是一次性的单工传输，只能从服务端发送到客户端，而<code>WebSocket</code>是可复用的全双工传输，客户端和服务端都可以发送消息给对方</li><li><code>SSE</code>与<code>WebSocket</code>都存在实例方法<code>close</code>，但<code>WebSokcet</code>由于是双向通信，多了一个<code>send</code>实例方法</li><li><code>SSE</code>具备断开重连机制，而<code>WebSocket</code>没有</li><li><code>SSE</code>实例调用<code>close</code>方法没有参数，不可以配置，而<code>WebSocket</code>可以配置参数</li><li><code>SSE</code>支持自定义事件，而<code>WebSocket</code>不支持</li><li><code>SSE</code>没有<code>close</code>事件能够被监听，而<code>WebSocket</code>可以通过<code>addEventListener</code>可以监听到</li><li><code>SSE</code>服务器响应的格式为<code>text/event-stream</code>，返回的内容只为<code>string</code>，而<code>WebSocket</code>返回的格式有多种，<code>string</code>、<code>blob</code>...</li><li><code>SSE</code>直接利用<code>cookie</code>来实现权限控制的效果，<code>WebSocket</code>权限控制需要另外设置</li><li><code>SSE</code>无法选择要发送的对象，而<code>WebSocket</code>可以通过控制逻辑实现选择性发送，进而实现多播和广播</li></ol><h3 id="相同点"><a href="#相同点" class="header-anchor">#</a>相同点</h3><ol><li>实例属性获取<code>url</code>返回的规则相同</li><li>都存在实例方法<code>close</code>，同样存在<code>open</code>、<code>error</code>事件</li></ol><h2 id="参考文章"><a href="#参考文章" class="header-anchor">#</a>参考文章</h2><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/EventSource" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="sr-only">(opens new window)</span></span></a></li><li><a href="https://hpbn.co/server-sent-events-sse/" target="_blank" rel="noopener noreferrer">《High Performance Browser Networking》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="sr-only">(opens new window)</span></span></a></li><li><a href="https://html.spec.whatwg.org/multipage/server-sent-events.html" target="_blank" rel="noopener noreferrer">HTML SSE规范<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="sr-only">(opens new window)</span></span></a></li></ul><h2 id="关联阅读"><a href="#关联阅读" class="header-anchor">#</a>关联阅读</h2><ul><li><a href="https://juejin.cn/post/7220776393373450296" target="_blank" rel="noopener noreferrer">借助ChatGPT我封装了WebSocket<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="sr-only">(opens new window)</span></span></a></li><li><a href="https://juejin.cn/post/7222186286563672119" target="_blank" rel="noopener noreferrer">WebSocket疑问解答<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="sr-only">(opens new window)</span></span></a></li><li><a href="https://juejin.cn/post/7228831981889634363" target="_blank" rel="noopener noreferrer">WebSocket知识盘点<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="sr-only">(opens new window)</span></span></a></li></ul></div></section><footer class="page-edit"><div class="last-updated"><span class="prefix">Last Updated:</span><span class="time">7/28/2023, 12:38:39 PM</span></div></footer><div class="comments-wrapper"></div><ul class="side-bar sub-sidebar-wrapper" style="width:12rem" data-v-898d6c54><li class="level-2" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#前言" class="sidebar-link reco-side-前言" data-v-898d6c54>前言</a></li><li class="level-2" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#介绍" class="sidebar-link reco-side-介绍" data-v-898d6c54>介绍</a></li><li class="level-2" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#建立-sse" class="sidebar-link reco-side-建立-sse" data-v-898d6c54>建立 SSE</a></li><li class="level-3" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#url" class="sidebar-link reco-side-url" data-v-898d6c54>url</a></li><li class="level-3" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#options" class="sidebar-link reco-side-options" data-v-898d6c54>options</a></li><li class="level-2" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#实例属性" class="sidebar-link reco-side-实例属性" data-v-898d6c54>实例属性</a></li><li class="level-3" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#readystate" class="sidebar-link reco-side-readystate" data-v-898d6c54>readyState</a></li><li class="level-3" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#url-2" class="sidebar-link reco-side-url-2" data-v-898d6c54>url</a></li><li class="level-3" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#withcredentials-2" class="sidebar-link reco-side-withcredentials-2" data-v-898d6c54>withCredentials</a></li><li class="level-2" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#实例方法" class="sidebar-link reco-side-实例方法" data-v-898d6c54>实例方法</a></li><li class="level-3" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#close" class="sidebar-link reco-side-close" data-v-898d6c54>close</a></li><li class="level-2" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#事件" class="sidebar-link reco-side-事件" data-v-898d6c54>事件</a></li><li class="level-3" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#open" class="sidebar-link reco-side-open" data-v-898d6c54>open</a></li><li class="level-3" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#message" class="sidebar-link reco-side-message" data-v-898d6c54>message</a></li><li class="level-3" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#error" class="sidebar-link reco-side-error" data-v-898d6c54>error</a></li><li class="level-3" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#自定义事件" class="sidebar-link reco-side-自定义事件" data-v-898d6c54>自定义事件</a></li><li class="level-2" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#其他" class="sidebar-link reco-side-其他" data-v-898d6c54>其他</a></li><li class="level-3" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#retry" class="sidebar-link reco-side-retry" data-v-898d6c54>retry</a></li><li class="level-2" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#差异总结" class="sidebar-link reco-side-差异总结" data-v-898d6c54>差异总结</a></li><li class="level-3" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#不同点" class="sidebar-link reco-side-不同点" data-v-898d6c54>不同点</a></li><li class="level-3" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#相同点" class="sidebar-link reco-side-相同点" data-v-898d6c54>相同点</a></li><li class="level-2" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#参考文章" class="sidebar-link reco-side-参考文章" data-v-898d6c54>参考文章</a></li><li class="level-2" data-v-898d6c54><a href="/views/js/2023/2023-05-16.html#关联阅读" class="sidebar-link reco-side-关联阅读" data-v-898d6c54>关联阅读</a></li></ul></main></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div></div></div></div><script src="/assets/js/app.c6e1a2e0.js" defer></script><script src="/assets/js/5.5d1de1a1.js" defer></script><script src="/assets/js/1.907b8fa1.js" defer></script><script src="/assets/js/6.586ea9b6.js" defer></script><script src="/assets/js/32.6c537ddd.js" defer></script></body></html>